EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
lab2.exe_ -- emu8086 assembler version: 4.08  
 
[ 2018/11/22  --  19:14:08 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       ;name:
[   2]        :                                       ;author: mbinary
[   3]        :                                       ;time: 2018-11
[   4]        :                                       ;function:
[   5]        :                                       include 'emu8086.inc'
[   6]        :                                       include mymacro.inc
[   7]        :                                       ;  this file should be in .../emu8086/inc/
[   8]        :                                       ; and the new line should be dos formatted, namely \n\r
[   9]        :                                       
[  10]        :                                       .model small
[  11]        :                                       .stack 100h
[  12]        :                                       .data
[  13]        :                                       ;filename db 256 dup(0)
[  14]    0100: 74 65 73 74 2E 74 78 74 00            filename  db "test.txt",0   ; test.txt  in Mybuild
[  15]    0109: 74 65 73 74 5F 73 6F 72 74 65 64 2E   sortedfile  db "test_sorted.txt",0
                74 78 74 00                         
[  16]    0119: 00 00                                 size dw ?
[  17]    011B: 00 00                                 	handle dw ?
[  18]    011D: 00 00 00 00 00 00 00 00 00 00 00 00   	buffer db 1024 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00                         
[  19]        :                                       
[  20]        :                                       .code
[  21]    0520: BA 10 00 8E DA                        .startup
[  22]    0525: EB 12 50 56 8A 04 3C 00 74 07 46 B4   DEFINE_PRINT_STRING   ; str in  si
                0E CD 10 EB F3 5E 58 C3             
[  23]    0539: EB 26 52 50 3D 00 00 75 0A 50 B0 30   DEFINE_PRINT_NUM
                B4 0E CD 10 58 EB 12 3D 00 00 79 0A 
                F7 D8 50 B0 2D B4 0E CD 10 58 E8 05 
                00 58 5A C3                         
[  24]    0561: EB 50 50 53 51 52 B9 01 00 BB 10 27   DEFINE_PRINT_NUM_UNS
                3D 00 00 74 32 83 FB 00 74 35 83 F9 
                00 74 04 3B C3 72 14 B9 00 00 BA 00 
                00 F7 F3 04 30 50 8A C0 B4 0E CD 10 
                58 8B C2 50 BA 00 00 8B C3 2E F7 36 
                91 00 8B D8 58 EB CE 50 B0 30 B4 0E 
                CD 10 58 5A 59 5B 58 C3 0A 00       
[  25]        :                                       
[  26]    05B3: 00 00 00 00 00 00 51 53 52 51 B0 72   filesize filename
                3C 72 74 0B 3C 77 74 0B 3C 61 74 53 
                E9 AB 00 B0 00 EB 4E B9 00 00 BA 00 
                00 B4 3C CD 21 72 66 53 50 8B D8 B4 
                3E CD 21 72 02 EB 32 50 56 EB 1B 5B 
                65 72 72 6F 72 5D 3A 20 63 6C 6F 73 
                65 20 66 69 6C 65 20 66 61 69 6C 65 
                64 00 BE CE 00 2E 8A 04 3C 00 74 07 
                46 B4 0E CD 10 EB F2 5E 58 58 5B B0 
                01 BA 00 00 B4 3D CD 21 72 1B A3 97 
                00 B0 72 3C 61 74 02 EB 74 B0 02 B9 
                00 00 BA 00 00 B4 42 CD 21 72 02 EB 
                64 50 56 EB 1C 5B 65 72 72 6F 72 5D 
                3A 20 6F 70 65 6E 20 66 69 6C 65 20 
                66 61 69 6C 65 64 3A 20 00 BE 28 01 
                2E 8A 04 3C 00 74 07 46 B4 0E CD 10 
                EB F2 5E 58 EB 2F 50 56 EB 16 5B 65 
                72 72 6F 72 5D 3A 20 75 6E 6B 6E 6F 
                77 6E 20 6D 6F 64 65 00 BE 5D 01 2E 
                8A 04 3C 00 74 07 46 B4 0E CD 10 EB 
                F2 5E 58 EB 00 59 5A B4 42 8B 1E 97 
                00 B0 02 B9 00 00 BA 00 00 CD 21 53 
                50 8B 1E 97 00 B4 3E CD 21 72 02 EB 
                32 50 56 EB 1B 5B 65 72 72 6F 72 5D 
                3A 20 63 6C 6F 73 65 20 66 69 6C 65 
                20 66 61 69 6C 65 64 00 BE AC 01 2E 
                8A 04 3C 00 74 07 46 B4 0E CD 10 EB 
                F2 5E 58 58 5B 5B 59                
[  27]    06FE: A3 19 00                              mov size, ax
[  28]        :                                       
[  29]    0701: 52 51 B0 72 3C 72 74 0B 3C 77 74 0B   open filename 'r'  handle
                3C 61 74 53 E9 AB 00 B0 00 EB 4E B9 
                00 00 BA 00 00 B4 3C CD 21 72 66 53 
                50 8B D8 B4 3E CD 21 72 02 EB 32 50 
                56 EB 1B 5B 65 72 72 6F 72 5D 3A 20 
                63 6C 6F 73 65 20 66 69 6C 65 20 66 
                61 69 6C 65 64 00 BE 14 02 2E 8A 04 
                3C 00 74 07 46 B4 0E CD 10 EB F2 5E 
                58 58 5B B0 01 BA 00 00 B4 3D CD 21 
                72 1B A3 1B 00 B0 72 3C 61 74 02 EB 
                74 B0 02 B9 00 00 BA 00 00 B4 42 CD 
                21 72 02 EB 64 50 56 EB 1C 5B 65 72 
                72 6F 72 5D 3A 20 6F 70 65 6E 20 66 
                69 6C 65 20 66 61 69 6C 65 64 3A 20 
                00 BE 6E 02 2E 8A 04 3C 00 74 07 46 
                B4 0E CD 10 EB F2 5E 58 EB 2F 50 56 
                EB 16 5B 65 72 72 6F 72 5D 3A 20 75 
                6E 6B 6E 6F 77 6E 20 6D 6F 64 65 00 
                BE A3 02 2E 8A 04 3C 00 74 07 46 B4 
                0E CD 10 EB F2 5E 58 EB 00 59 5A    
[  30]    07F0: 51 53 52 50 8B 1E 1B 00 BA 1D 00 B8   	fileio handle 'r' size buffer
                72 00 3D 77 00 74 04 B4 3F EB 02 B4 
                40 8B 0E 19 00 CD 21 72 02 EB 30 50 
                56 EB 19 5B 65 72 72 6F 72 5D 3A 20 
                72 65 61 64 2F 77 72 69 74 65 20 66 
                69 6C 65 00 BE F7 02 2E 8A 04 3C 00 
                74 07 46 B4 0E CD 10 EB F2 5E 58 58 
                5A 5B 59                            
[  31]    0847: 53 50 8B 1E 1B 00 B4 3E CD 21 72 02   	close handle
                EB 32 50 56 EB 1B 5B 65 72 72 6F 72 
                5D 3A 20 63 6C 6F 73 65 20 66 69 6C 
                65 20 66 61 69 6C 65 64 00 BE 39 03 
                2E 8A 04 3C 00 74 07 46 B4 0E CD 10 
                EB F2 5E 58 58 5B                   
[  32]        :                                       	
[  33]    0889: 50 56 EB 11 62 65 66 6F 72 65 20 73   	print "before sorting: "
                6F 72 74 69 6E 67 3A 20 00 BE 6D 03 
                2E 8A 04 3C 00 74 07 46 B4 0E CD 10 
                EB F2 5E 58                         
[  34]    08B1: 50 56 51 8B 0E 19 00 BE 1D 00 B4 00   	printNum buffer  size
                8A 04 46 E8 A0 FC 50 56 EB 02 20 00 
                BE A7 03 2E 8A 04 3C 00 74 07 46 B4 
                0E CD 10 EB F2 5E 58 E2 DD 59 5E 58 
                                                    
[  35]        :                                       	
[  36]    08E1: 50 53 51 BB 1D 00 4B 43 80 3F 00 75   	sort buffer, 0    ; 1 for reverse
                FA 8B CB B0 00 F6 D8 BB 1D 00 49 3B 
                CB 74 19 8A 77 01 8A 17 8A E6 2A E2 
                32 E0 79 05 88 57 01 88 37 43 3B D9 
                7C E9 EB DF 59 5B 58                
[  37]        :                                       	     	
[  38]    0918: 52 51 B0 77 3C 72 74 0B 3C 77 74 0B   	open sortedfile 'w' handle
                3C 61 74 53 E9 AB 00 B0 00 EB 4E B9 
                00 00 BA 09 00 B4 3C CD 21 72 66 53 
                50 8B D8 B4 3E CD 21 72 02 EB 32 50 
                56 EB 1B 5B 65 72 72 6F 72 5D 3A 20 
                63 6C 6F 73 65 20 66 69 6C 65 20 66 
                61 69 6C 65 64 00 BE 2B 04 2E 8A 04 
                3C 00 74 07 46 B4 0E CD 10 EB F2 5E 
                58 58 5B B0 01 BA 09 00 B4 3D CD 21 
                72 1B A3 1B 00 B0 77 3C 61 74 02 EB 
                74 B0 02 B9 00 00 BA 00 00 B4 42 CD 
                21 72 02 EB 64 50 56 EB 1C 5B 65 72 
                72 6F 72 5D 3A 20 6F 70 65 6E 20 66 
                69 6C 65 20 66 61 69 6C 65 64 3A 20 
                00 BE 85 04 2E 8A 04 3C 00 74 07 46 
                B4 0E CD 10 EB F2 5E 58 EB 2F 50 56 
                EB 16 5B 65 72 72 6F 72 5D 3A 20 75 
                6E 6B 6E 6F 77 6E 20 6D 6F 64 65 00 
                BE BA 04 2E 8A 04 3C 00 74 07 46 B4 
                0E CD 10 EB F2 5E 58 EB 00 59 5A    
[  39]    0A07: 51 53 52 50 8B 1E 1B 00 BA 1D 00 B8   fileio handle 'w' size buffer
                77 00 3D 77 00 74 04 B4 3F EB 02 B4 
                40 8B 0E 19 00 CD 21 72 02 EB 30 50 
                56 EB 19 5B 65 72 72 6F 72 5D 3A 20 
                72 65 61 64 2F 77 72 69 74 65 20 66 
                69 6C 65 00 BE 0E 05 2E 8A 04 3C 00 
                74 07 46 B4 0E CD 10 EB F2 5E 58 58 
                5A 5B 59                            
[  40]    0A5E: 53 50 8B 1E 1B 00 B4 3E CD 21 72 02   	close handle
                EB 32 50 56 EB 1B 5B 65 72 72 6F 72 
                5D 3A 20 63 6C 6F 73 65 20 66 69 6C 
                65 20 66 61 69 6C 65 64 00 BE 50 05 
                2E 8A 04 3C 00 74 07 46 B4 0E CD 10 
                EB F2 5E 58 58 5B                   
[  41]        :                                       	
[  42]    0AA0: 50 56 EB 03 0D 0A 00 BE 84 05 2E 8A   	printn ''
                04 3C 00 74 07 46 B4 0E CD 10 EB F2 
                5E 58                               
[  43]    0ABA: 50 56 EB 11 61 66 74 65 72 20 20 73   	print "after  sorting: "
                6F 72 74 69 6E 67 3A 20 00 BE 9E 05 
                2E 8A 04 3C 00 74 07 46 B4 0E CD 10 
                EB F2 5E 58                         
[  44]    0AE2: 50 56 51 8B 0E 19 00 BE 1D 00 B4 00   	printNum buffer  size
                8A 04 46 E8 6F FA 50 56 EB 02 20 00 
                BE D8 05 2E 8A 04 3C 00 74 07 46 B4 
                0E CD 10 EB F2 5E 58 E2 DD 59 5E 58 
                                                    
[  45]        :                                       	
[  46]        :                                       printNum macro buffer  size
[  47]        :                                       local  L
[  48]        :                                       push ax
[  49]        :                                       push si
[  50]        :                                       push cx
[  51]        :                                       mov cx,size
[  52]        :                                       lea si,buffer
[  53]        :                                       L:
[  54]        :                                       mov ah,0
[  55]        :                                       mov al,[si]
[  56]        :                                       inc si
[  57]        :                                       call print_num_uns
[  58]        :                                       print " "
[  59]        :                                       loop     L
[  60]        :                                       
[  61]        :                                       pop cx
[  62]        :                                       pop si
[  63]        :                                       pop ax
[  64]        :                                       printNum endm
[  65]        :                                       	
[  66]    0B12:                                       quit:
[  67]    0B12: B8 00 4C CD 21                        .exit
[  68]        :                                       end
[  69]        :                                       
[  70]        :                                       
 
===================================================================================================
 
EXE HEADER - bytes from 0000 to 01FF inclusive.

0000: 4D      -   exe signature (M)
0001: 5A      -   exe signature (Z)
0002: 17      -   bytes on last page (l.byte)
0003: 01      -   bytes on last page (h.byte)
0004: 07      -   512 byte pages in file (l.byte)
0005: 00      -   512 byte pages in file (h.byte)
0006: 01      -   relocations (l.byte)
0007: 00      -   relocations (h.byte)
0008: 20      -   paragraphs in header (l.byte)
0009: 00      -   paragraphs in header (h.byte)
000A: 00      -   minimum memory (l.byte)
000B: 00      -   minimum memory (h.byte)
000C: FF      -   maximum memory (l.byte)
000D: FF      -   maximum memory (h.byte)
000E: 00      -   SS - stack segment (l.byte)
000F: 00      -   SS - stack segment (h.byte)
0010: 00      -   SP - stack pointer (l.byte)
0011: 01      -   SP - stack pointer (h.byte)
0012: 77      -   check sum (l.byte)
0013: 77      -   check sum (h.byte)
0014: 00      -   IP - instruction pointer (l.byte)
0015: 00      -   IP - instruction pointer (h.byte)
0016: 52      -   CS - code segment (l.byte)
0017: 00      -   CS - code segment (h.byte)
0018: 1E      -   relocation table adress (l.byte)
0019: 00      -   relocation table adress (h.byte)
001A: 00      -   overlay number (l.byte)
001B: 00      -   overlay number (h.byte)
001C: 01      -   signature (l.byte)
001D: 00      -   signature (h.byte)
001E: 01      -   relocation table - offset inside segment (l.byte)
001F: 00      -   relocation table - offset inside segment (h.byte)
0020: 52      -   relocation table - segment anchor (l.byte)
0021: 00      -   relocation table - segment anchor (h.byte)
0022 to 01FF  -   reserved relocation area  (00) 




===================================================================================================
