

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <link href="https://mbinary0.github.io/resource/github.markdown.css" rel="stylesheet">
  </head>
  <body>
     	<div><h2>
                <a href="../index.html">&nbsp;&nbsp;<i class="fa fa-level-up"></i>&nbsp;&nbsp;</a>:
                /<a href="../../../../index.html"><i class="fa fa-home"></i></a>/<a href="../../../index.html">计算机与信息类</a>/<a href="../../index.html">编译原理和技术</a>/<a href="../index.html">homework&lab-张昱</a>/<a href="index.html">c1recognizer</a>
            </h2>
        </div>
        
        
        <h2>Directories</h2>
        <ul>
        <li><a href="cmake/index.html" ><i class="fa fa-folder"></i>&nbsp;cmake</a></li>
<li><a href="doc/index.html" ><i class="fa fa-folder"></i>&nbsp;doc</a></li>
<li><a href="grammar/index.html" ><i class="fa fa-folder"></i>&nbsp;grammar</a></li>
<li><a href="include/index.html" ><i class="fa fa-folder"></i>&nbsp;include</a></li>
<li><a href="src/index.html" ><i class="fa fa-folder"></i>&nbsp;src</a></li>
<li><a href="test/index.html" ><i class="fa fa-folder"></i>&nbsp;test</a></li>
        </ul>

        <h2>Files</h2>
        <ul>
        <li><a href="https://raw.githubusercontent.com/mbinary/USTC-CS-Courses-Resource/master/计算机与信息类/编译原理和技术/homework&lab-张昱/c1recognizer/c1recognizer-config.cmake.in" ><i class="fa fa-pencil-square-o"></i>&nbsp;c1recognizer-config.cmake.in---(176.00B)</a></li>
<li><a href="https://raw.githubusercontent.com/mbinary/USTC-CS-Courses-Resource/master/计算机与信息类/编译原理和技术/homework&lab-张昱/c1recognizer/CMakeLists.txt" ><i class="fa fa-pencil-square-o"></i>&nbsp;CMakeLists.txt---(2.30K)</a></li>
<li><a href="https://raw.githubusercontent.com/mbinary/USTC-CS-Courses-Resource/master/计算机与信息类/编译原理和技术/homework&lab-张昱/c1recognizer/README.md" ><i class="fa fa-pencil-square-o"></i>&nbsp;README.md---(3.09K)</a></li>
        </ul>

        <div style="text-decration:underline;display:inline">
        <a href="https://github.com/mbinary/USTC-CS-Courses-Resource.git" target="_blank" rel="external"><i class="fa fa-github"></i>&nbsp; Github</a>
        <a href="mailto:&#122;huheqin1@gmail?subject=反馈与建议" style="float:right" target="_blank" rel="external"><i class="fa fa-envelope"></i>&nbsp; Feedback</a>
        </div>

        <h1 style="color:red;text-align:center;" >Read Me</h1>

<h1 id="c1-language-recognizer-reference-version">C1 Language Recognizer (Reference Version)</h1>
<p>A C1 language recognizer library built on ANTLR v4, which constructs an abstract syntax tree on given source input.</p>
<h2 id="build-requirement">Build Requirement</h2>
<ul>
<li>CMake 3.5 or later</li>
<li>Any GCC compatible C++ compiler, C++ 11 must be supported</li>
<li>Any java runtime environment (JRE), preferring version for Java 8</li>
<li>pkg-config</li>
<li>uuid-dev</li>
</ul>
<p>If you have the patience to configure those correctly on Windows, using Windows as the expirement platform is okay.
Otherwise please choose one of the easy-to-use Linux distributions. (Note: Windows Subsystem for Linux will work fine)</p>
<p>For example, installing those in Ubuntu with <code>apt</code>:</p>
<div class="codehilite"><pre><span></span>sudo apt install cmake g++ openjdk-8-jre-headless pkg-config uuid-dev
</pre></div>


<p>Also, it would take a while to build it for the first time. This is because it needs to build the dependency antlr4cpp.
And parallel building won't work on it; it seems that CMake is the one to be blamed.</p>
<p>Besides these, you're also expected to download an ANTLR complete jar file. This is expected throughout this project.
You may find it from <a href="http://www.antlr.org/">ANTLR v4 Official Site</a>.</p>
<h2 id="building">Building</h2>
<p>For first time building:</p>
<div class="codehilite"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DANTLR4CPP_JAR_LOCATION<span class="o">=</span>/path/to/your/antlr.jar ..
make
cmake ..
make -j
</pre></div>


<p>After that, each time you have any modification, simply do</p>
<div class="codehilite"><pre><span></span>make -j
</pre></div>


<p>To avoid UI unresponding, you may want to replace <code>-j</code> option with <code>-jN</code>, where <code>N</code> is parallel task number you expecting.</p>
<h2 id="antlrv4-usage">ANTLRv4 Usage</h2>
<p>For the building work, I've setup the whole CMake project that will work easily as described above.</p>
<p>And for the most special, magic and wonderful part of ANTLR, visualization, follow these:</p>
<ul>
<li>Rail-road or ADT graphs: Using Visual Studio Code will be the best choice. Have ANTLR plugin installed, you'll gonna
  find those options when you right-click on the editor.</li>
<li>Testing grammars (including parse tree visualization):<blockquote>
<p>If you'd like to see GUI rather than console-printed parse tree, you'll need to first install JDK on your host
system (Windows or Linux, DO NOT use WSL here if you don't have sufficient knowledge on configuring X11
environment, which is needed for the GUI to show up). However if you don't want the GUI version visualized parse
tree, just ignore this tip.</p>
</blockquote>
</li>
</ul>
<p>First of all, you need to ensure <code>.</code> and ANTLR v4 JAR file exists in your CLASSPATH.
  * In PowerShell, it is <code>$env:CLASSPATH</code>.
  * In Linux-like shells, it is <code>$CLASSPATH</code>.</p>
<p>Then, use ANTLR to generate <code>.java</code> source files from grammar files.
  <code>sh
  java org.antlr.v4.Tool *.g4</code></p>
<p>After that, compile generated sources.
  <code>sh
  javac *.java</code></p>
<p>Then, use the <code>grun</code> tool comes with antlr to test your grammars.
  <code>sh
  # Testing lexer
  java org.antlr.v4.gui.TestRig C1Lexer tokens -tokens ../../test/test_cases/simple.c1
  # Testing lexer + parser, GUI version parse tree
  java org.antlr.v4.gui.TestRig C1 compilationUnit -gui ../../test/test_cases/simple.c1
  # Testing lexer + parser, console printed version parse tree
  java org.antlr.v4.gui.TestRig C1 compilationUnit -tree ../../test/test_cases/simple.c1</code></p>
    </body>  
</html>
